typeof gj=="undefined"&&(gj={});typeof gj.grid=="undefined"&&(gj.grid={});gj.grid.configuration={base:{dataSource:undefined,columns:[],autoGenerateColumns:!1,defaultColumnSettings:{hidden:!1,width:undefined,sortable:!1,type:undefined,title:undefined,field:undefined,align:"left",cssClass:undefined,headerCssClass:undefined,tooltip:undefined,icon:undefined,events:undefined,format:undefined,decimalDigits:undefined,tmpl:undefined},mapping:{dataField:"records",totalRecordsField:"total"},params:{},defaultParams:{sortBy:"sortBy",direction:"direction",page:"page",limit:"limit"},uiLibrary:"jqueryui",style:{wrapper:"gj-grid-wrapper",table:"gj-grid-table ui-widget-content gj-grid-ui-table",loadingCover:"gj-grid-loading-cover",loadingText:"gj-grid-loading-text",header:{cell:"ui-widget-header ui-state-default gj-grid-ui-thead-th",sortable:"gj-grid-thead-sortable",sortAscIcon:"gj-grid-ui-thead-th-sort-icon ui-icon ui-icon-arrowthick-1-s",sortDescIcon:"gj-grid-ui-thead-th-sort-icon ui-icon ui-icon-arrowthick-1-n"},content:{rowHover:"ui-state-hover",rowSelected:"ui-state-active"},pager:{cell:"ui-widget-header ui-state-default ui-grid-pager-cell",stateDisabled:"ui-state-disabled"},expandIcon:"ui-icon ui-icon-plus",collapseIcon:"ui-icon ui-icon-minus"},selectionType:"single",selectionMethod:"basic",autoLoad:!0,notFoundText:"No records found.",width:undefined,minWidth:undefined,fontSize:undefined,dataKey:undefined},bootstrap:{style:{wrapper:"gj-grid-wrapper",table:"gj-grid-table table table-bordered table-hover",header:{cell:"gj-grid-bootstrap-thead-cell",sortable:"gj-grid-thead-sortable",sortAscIcon:"glyphicon glyphicon-sort-by-alphabet",sortDescIcon:"glyphicon glyphicon-sort-by-alphabet-alt"},content:{rowHover:"",rowSelected:"active"},pager:{cell:"gj-grid-bootstrap-tfoot-cell",stateDisabled:"ui-state-disabled"},expandIcon:"glyphicon glyphicon-plus",collapseIcon:"glyphicon glyphicon-minus"},pager:{leftControls:[$('<button type="button" data-role="page-first" title="First Page" class="btn btn-default btn-sm"><span class="glyphicon glyphicon-step-backward"><\/span><\/button>'),$("<div>&nbsp;<\/div>"),$('<button type="button" data-role="page-previous" title="Previous Page" class="btn btn-default btn-sm"><span class="glyphicon glyphicon-backward"><\/span><\/button>'),$("<div>&nbsp;<\/div>"),$("<div>Page<\/div>"),$("<div>&nbsp;<\/div>"),$("<div><\/div>").append($('<input data-role="page-number" class="form-control input-sm" style="width: 40px; text-align: right;" type="text" value="0">')),$("<div>&nbsp;<\/div>"),$("<div>of&nbsp;<\/div>"),$('<div data-role="page-label-last">0<\/div>'),$("<div>&nbsp;<\/div>"),$('<button type="button" data-role="page-next" title="Next Page" class="btn btn-default btn-sm"><span class="glyphicon glyphicon-forward"><\/span><\/button>'),$("<div>&nbsp;<\/div>"),$('<button type="button" data-role="page-last" title="Last Page" class="btn btn-default btn-sm"><span class="glyphicon glyphicon-step-forward"><\/span><\/button>'),$("<div>&nbsp;<\/div>"),$('<button type="button" data-role="page-refresh" title="Reload" class="btn btn-default btn-sm"><span class="glyphicon glyphicon-refresh"><\/span><\/button>'),$("<div>&nbsp;<\/div>"),$("<div><\/div>").append($('<select data-role="page-size" class="form-control input-sm"><\/select><\/div>'))],rightControls:[$("<div>Displaying records&nbsp;<\/div>"),$('<div data-role="record-first">0<\/div>'),$("<div>&nbsp;-&nbsp;<\/div>"),$('<div data-role="record-last">0<\/div>'),$("<div>&nbsp;of&nbsp;<\/div>"),$('<div data-role="record-total">0<\/div>').css({"margin-right":"5px"})]}}};gj.grid.events={beforeEmptyRowInsert:function(n,t){n.trigger("beforeEmptyRowInsert",[t])},dataBinding:function(n,t){n.trigger("dataBinding",[t])},dataBound:function(n,t,i){n.trigger("dataBound",[t,i])},rowDataBound:function(n,t,i,r){n.trigger("rowDataBound",[t,i,r])},cellDataBound:function(n,t,i,r,u){n.trigger("cellDataBound",[t,i,r,u])},rowSelect:function(n,t,i,r){n.trigger("rowSelect",[t,i,r])},rowUnselect:function(n,t,i,r){n.trigger("rowUnselect",[t,i,r])},destroying:function(n){n.trigger("destroying")},columnHide:function(n,t){n.trigger("columnHide",[t])},columnShow:function(n,t){n.trigger("columnShow",[t])},initialized:function(n){n.trigger("initialized")}};typeof gj.grid.plugins=="undefined"&&(gj.grid.plugins={});gj.grid.plugins.expandCollapseRows={configuration:{detailTemplate:undefined},private:{detailExpand:function(n,t){var i=n.closest("tr"),r=$('<tr data-role="details"><\/tr>'),e=$('<td colspan="'+gj.grid.private.countVisibleColumns(t)+'"><\/td>'),o=t.data("grid"),u=i.data("row"),f=$(u.details);r.append(e.append(f));r.insertAfter(i);n.find("span").attr("class",o.style.collapseIcon);n.off("click").on("click",function(){gj.grid.plugins.expandCollapseRows.private.detailCollapse($(this),t)});gj.grid.plugins.expandCollapseRows.events.detailExpand(t,f,u.record)},detailCollapse:function(n,t){var i=n.closest("tr"),r=i.next('tr[data-role="details"]'),u=r.find("td>div");r.remove();n.find("span").attr("class",t.data("grid").style.expandIcon);n.off("click").on("click",function(){gj.grid.plugins.expandCollapseRows.private.detailExpand($(this),t)});gj.grid.plugins.expandCollapseRows.events.detailCollapse(t,u,i.data("row").record)},updateDetailsColSpan:function(n){var t=n.find('tbody > tr[data-role="details"] > td');t&&t.length&&t.attr("colspan",gj.grid.private.countVisibleColumns(n))}},public:{},events:{detailExpand:function(n,t,i){n.trigger("detailExpand",[t,i])},detailCollapse:function(n,t,i){n.trigger("detailCollapse",[t,i])}},init:function(n){$.extend(!0,n,gj.grid.plugins.expandCollapseRows.public);var t=n.data("grid");if(typeof t.detailTemplate!="undefined"){t.columns=[{title:"",field:t.dataKey,width:t.uiLibrary==="jqueryui"?24:30,align:"center",type:"icon",icon:t.style.expandIcon,events:{click:function(){gj.grid.plugins.expandCollapseRows.private.detailExpand($(this),n)}}}].concat(t.columns);n.on("rowDataBound",function(n,i){i.data("row").details=$(t.detailTemplate)});n.on("columnShow",function(){gj.grid.plugins.expandCollapseRows.private.updateDetailsColSpan(n)});n.on("columnHide",function(){gj.grid.plugins.expandCollapseRows.private.updateDetailsColSpan(n)})}}};$.extend(!0,gj.grid.configuration.base,gj.grid.plugins.expandCollapseRows.configuration);typeof gj.grid.plugins=="undefined"&&(gj.grid.plugins={});gj.grid.plugins.inlineEditing={configuration:{defaultColumnSettings:{editor:undefined}},private:{OnCellEdit:function(n,t,i,r){var u,f;if(t.attr("data-mode")!=="edit"&&i.editor){if(t.find('div[data-role="display"]').hide(),u=t.find('div[data-role="edit"]'),u&&u.length)u.show(),f=u.find("input, select, textarea").first();else{u=$('<div data-role="edit" />');t.append(u);typeof i.editor=="function"?i.editor(u,r[i.field]):typeof i.editor=="boolean"&&u.append('<input type="text" value="'+r[i.field]+'"/>');f=u.find("input, select, textarea").first();f.on("blur",function(){gj.grid.plugins.inlineEditing.private.OnCellDisplay(n,t,i)});f.on("keypress",function(r){r.which===13&&gj.grid.plugins.inlineEditing.private.OnCellDisplay(n,t,i)})}f.focus().select();t.attr("data-mode","edit")}},OnCellDisplay:function(n,t,i){var r,e,f,u="";t.attr("data-mode")==="edit"&&($editorContainer=t.find('div[data-role="edit"]'),r=$editorContainer.find("input, select, textarea").first().val(),f=t.parent().data("row").record,e=f[i.field],r!==e&&($displayContainer=t.find('div[data-role="display"]'),gj.grid.private.setCellText($displayContainer,i,r),f[i.field]=r,$editorContainer.hide(),$displayContainer.show(),t.find("span.gj-dirty").length===0&&(t.css("padding-top")!=="0px"&&(u+="margin-top: -"+t.css("padding-top")+";"),t.css("padding-left")!=="0px"&&(u+="margin-left: -"+t.css("padding-left")+";"),u=u?' style="'+u+'"':"",t.prepend($('<span class="gj-dirty"'+u+"><\/span>"))),t.attr("data-mode","display"),gj.grid.plugins.inlineEditing.events.cellDataChanged(n,t,i,f,e,r),gj.grid.plugins.inlineEditing.private.updateChanges(n,i,f,r)))},updateChanges:function(n,t,i,r){var f,e,o,u=n.data("grid");u.guid||(u.guid=gj.grid.plugins.inlineEditing.private.generateGUID());u.dataKey&&(f=JSON.parse(sessionStorage.getItem("gj.grid."+u.guid)),f?e=f.filter(function(n){return n[u.dataKey]===i[u.dataKey]}):f=[],e&&e.length===1?e[0][t.field]=r:(o={},o[u.dataKey]=i[u.dataKey],u.dataKey!==t.field&&(o[t.field]=r),f.push(o)),sessionStorage.setItem("gj.grid."+u.guid,JSON.stringify(f)))},generateGUID:function(){function n(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}},public:{getChanges:function(){return JSON.parse(sessionStorage.getItem("gj.grid."+this.data("grid").guid))}},events:{cellDataChanged:function(n,t,i,r,u,f){n.trigger("cellDataChanged",[t,i,r,u,f])}},init:function(n){$.extend(!0,n,gj.grid.plugins.inlineEditing.public);n.on("cellDataBound",function(t,i,r,u,f){if(u.editor)i.parent().on("click",function(){gj.grid.plugins.inlineEditing.private.OnCellEdit(n,i.parent(),u,f)})})}};$.extend(!0,gj.grid.configuration.base,gj.grid.plugins.inlineEditing.configuration);typeof gj.grid.plugins=="undefined"&&(gj.grid.plugins={});gj.grid.plugins.pagination={configuration:{pager:{enable:!1,limit:10,sizes:undefined,leftControls:[$('<div title="First" data-role="page-first" class="ui-icon ui-icon-seek-first ui-grid-icon"><\/div>'),$('<div title="Previous" data-role="page-previous" class="ui-icon ui-icon-seek-prev ui-grid-icon"><\/div>'),$("<div>Page<\/div>"),$("<div><\/div>").append($('<input type="text" data-role="page-number" class="ui-grid-pager" value="0">')),$("<div>of&nbsp;<\/div>"),$('<div data-role="page-label-last">0<\/div>'),$('<div title="Next" data-role="page-next" class="ui-icon ui-icon-seek-next ui-grid-icon"><\/div>'),$('<div title="Last" data-role="page-last" class="ui-icon ui-icon-seek-end ui-grid-icon"><\/div>'),$('<div title="Reload" data-role="page-refresh" class="ui-icon ui-icon-refresh ui-grid-icon"><\/div>'),$("<div><\/div>").append($('<select data-role="page-size" class="ui-grid-page-sizer"><\/select>'))],rightControls:[$("<div>Displaying records&nbsp;<\/div>"),$('<div data-role="record-first">0<\/div>'),$("<div>&nbsp;-&nbsp;<\/div>"),$('<div data-role="record-last">0<\/div>'),$("<div>&nbsp;of&nbsp;<\/div>"),$('<div data-role="record-total">0<\/div>').css({"margin-right":"5px"})]}},private:{init:function(n){var u,f,t,e,o,i,s,h,c,r;if(t=n.data("grid"),t.pager&&t.pager.enable)for(t.params[t.defaultParams.page]=1,t.params[t.defaultParams.limit]=t.pager.limit,u=$("<tr/>"),f=$("<th/>").addClass(t.style.pager.cell),u.append(f),o=$("<div />").css({float:"left"}),i=$("<div />").css({float:"right"}),/msie/.test(navigator.userAgent.toLowerCase())&&i.css({"padding-top":"3px"}),f.append(o).append(i),s=$("<tfoot />").append(u),n.append(s),gj.grid.plugins.pagination.private.updatePagerColSpan(n),h=gj.grid.private.clone(t.pager.leftControls),$.each(h,function(){o.append(this)}),c=gj.grid.private.clone(t.pager.rightControls),$.each(c,function(){i.append(this)}),e=n.find("TFOOT [data-role]"),r=0;r<e.length;r++)gj.grid.plugins.pagination.private.initPagerControl($(e[r]),n)},initPagerControl:function(n,t){var i=t.data("grid");switch(n.data("role")){case"page-number":n.bind("keypress",function(n){n.keyCode===13&&$(this).trigger("change")});break;case"page-size":i.pager.sizes&&0<i.pager.sizes.length?(n.show(),$.each(i.pager.sizes,function(){n.append($("<option/>").attr("value",this.toString()).text(this.toString()))}),n.change(function(){var n=parseInt(this.value,10);i.params[i.defaultParams.page]=1;gj.grid.plugins.pagination.private.SetPageNumber(t,1);i.params[i.defaultParams.limit]=n;t.reload();gj.grid.plugins.pagination.events.pageSizeChange(t,n)}),n.val(i.params[i.defaultParams.limit])):n.hide();break;case"page-refresh":n.bind("click",function(){t.reload()})}},reloadPager:function(n,t){var f,u,o,e,s,r;if(r=n.data("grid"),r.pager.enable){for(f=0===t?0:r.params[r.defaultParams.page],u=parseInt(r.params[r.defaultParams.limit],10),o=Math.ceil(t/u),e=0===f?0:u*(f-1)+1,s=e+u>t?t:e+u-1,controls=n.find("TFOOT [data-role]"),i=0;i<controls.length;i++)gj.grid.plugins.pagination.private.reloadPagerControl($(controls[i]),n,f,o,e,s,t);gj.grid.plugins.pagination.private.updatePagerColSpan(n)}},reloadPagerControl:function(n,t,i,r,u,f,e){var o=t.data("grid");switch(n.data("role")){case"page-first":i<2?n.addClass(o.style.pager.stateDisabled).unbind("click"):n.removeClass(o.style.pager.stateDisabled).unbind("click").bind("click",gj.grid.plugins.pagination.private.CreateFirstPageHandler(t));break;case"page-previous":i<2?n.addClass(o.style.pager.stateDisabled).unbind("click"):n.removeClass(o.style.pager.stateDisabled).unbind("click").bind("click",gj.grid.plugins.pagination.private.CreatePrevPageHandler(t));break;case"page-number":n.val(i).unbind("change").bind("change",gj.grid.plugins.pagination.private.CreateChangePageHandler(t,i,r));break;case"page-label-last":n.text(r);break;case"page-next":r===i?n.addClass(o.style.pager.stateDisabled).unbind("click"):n.removeClass(o.style.pager.stateDisabled).unbind("click").bind("click",gj.grid.plugins.pagination.private.CreateNextPageHandler(t));break;case"page-last":r===i?n.addClass(o.style.pager.stateDisabled).unbind("click"):n.removeClass(o.style.pager.stateDisabled).unbind("click").bind("click",gj.grid.plugins.pagination.private.CreateLastPageHandler(t,r));break;case"record-first":n.text(u);break;case"record-last":n.text(f);break;case"record-total":n.text(e)}},CreateFirstPageHandler:function(n){return function(){var t=n.data("grid");t.params[t.defaultParams.page]=1;gj.grid.plugins.pagination.private.SetPageNumber(n,1);n.reload()}},CreatePrevPageHandler:function(n){return function(){var t,i,r;t=n.data("grid");i=t.params[t.defaultParams.page];r=i&&i>1?i-1:1;t.params[t.defaultParams.page]=r;gj.grid.plugins.pagination.private.SetPageNumber(n,r);n.reload()}},CreateNextPageHandler:function(n){return function(){var t,i;t=n.data("grid");i=t.params[t.defaultParams.page];t.params[t.defaultParams.page]=i+1;gj.grid.plugins.pagination.private.SetPageNumber(n,i+1);n.reload()}},CreateLastPageHandler:function(n,t){return function(){var i=n.data("grid");i.params[i.defaultParams.page]=t;gj.grid.plugins.pagination.private.SetPageNumber(n,t);n.reload()}},CreateChangePageHandler:function(n,t,i){return function(){var u=n.data("grid"),r=parseInt(this.value,10);r&&!isNaN(r)&&r<=i?(u.params[u.defaultParams.page]=r,n.reload()):(this.value=t,alert("Enter a valid page."))}},SetPageNumber:function(n,t){n.find("TFOOT [data-role='page-number']").val(t)},updatePagerColSpan:function(n){var t=n.find("tfoot > tr > th");t&&t.length&&t.attr("colspan",gj.grid.private.countVisibleColumns(n))}},public:{},events:{pageSizeChange:function(n,t){n.trigger("pageSizeChange",[t])}},init:function(n){gj.grid.plugins.pagination.private.init(n);n.on("dataBound",function(t,i,r){gj.grid.plugins.pagination.private.reloadPager(n,r)});n.on("columnShow",function(){gj.grid.plugins.pagination.private.updatePagerColSpan(n)});n.on("columnHide",function(){gj.grid.plugins.pagination.private.updatePagerColSpan(n)})}};$.extend(!0,gj.grid.configuration.base,gj.grid.plugins.pagination.configuration);typeof gj.grid.plugins=="undefined"&&(gj.grid.plugins={});gj.grid.plugins.responsiveDesign={configuration:{base:{resizeCheckInterval:500,responsive:!1,showHiddenColumnsAsDetails:!1,defaultColumn:{priority:undefined,minWidth:150},style:{rowDetailItem:""}},bootstrap:{style:{rowDetailItem:"col-lg-4"}}},private:{orderColumns:function(n){var t=[];if(n.columns&&n.columns.length){for(i=0;i<n.columns.length;i++)t.push({position:i,field:n.columns[i].field,minWidth:n.columns[i].width||n.columns[i].minWidth||n.defaultColumn.minWidth,priority:n.columns[i].priority||0});t.sort(function(n,t){var i=0;return n.priority<t.priority?i=-1:n.priority>t.priority&&(i=1),i})}return t},updateDetails:function(n){var o,u,e,f,s,i,t,r,h;for(o=n.find("tbody > tr"),u=n.data("grid"),e=0;e<o.length;e++)if(s=$(o[e]),!s.data("role"))for(i=s.data("row"),f=0;f<u.columns.length;f++)r=u.columns[f],t=i.details&&i.details.find('div[data-id="'+r.field+'"]'),u.columns[f].hidden?(h=gj.grid.private.formatText(i.record[r.field],r),t&&t.length?t.html("<b>"+r.title+"<\/b>: "+h):(t=$('<div data-id="'+r.field+'"><b>'+(r.title||r.field)+"<\/b>: "+h+"<\/div>"),t.addClass(u.style.rowDetailItem),i.details&&i.details.length||(i.details=$("<div/>")),i.details.append(t))):t&&t.length&&t.remove()}},public:{oldWidth:undefined,resizeCheckIntervalId:undefined,makeResponsive:function(){for(var i,r=0,u=this.data("grid"),t=gj.grid.plugins.responsiveDesign.private.orderColumns(u),n=0;n<t.length;n++)i=this.find("thead>tr>th:eq("+t[n].position+")"),i.is(":visible")&&t[n].minWidth<i.width()&&(r+=i.width()-t[n].minWidth);if(r)for(n=0;n<t.length;n++)i=this.find("thead>tr>th:eq("+t[n].position+")"),!i.is(":visible")&&t[n].minWidth<=r&&(this.showColumn(t[n].field),r-=i.width());for(n=t.length-1;n>=0;n--)i=this.find("thead>tr>th:eq("+t[n].position+")"),i.is(":visible")&&t[n].priority&&t[n].minWidth>i.outerWidth()&&this.hideColumn(t[n].field)}},events:{resize:function(n,t,i){n.trigger("resize",[t,i])}},init:function(n){$.extend(!0,n,gj.grid.plugins.responsiveDesign.public);var t=n.data("grid");if(t.responsive){n.on("initialized",function(){n.makeResponsive();n.oldWidth=n.width();n.resizeCheckIntervalId=setInterval(function(){var t=n.width();t!==n.oldWidth&&gj.grid.plugins.responsiveDesign.events.resize(n,t,n.oldWidth);n.oldWidth=t},t.resizeCheckInterval)});n.on("destroy",function(){n.resizeCheckIntervalId&&clearInterval(n.resizeCheckIntervalId)});n.on("resize",function(){n.makeResponsive()})}if(t.showHiddenColumnsAsDetails&&gj.grid.plugins.expandCollapseRows){n.on("dataBound",function(){gj.grid.plugins.responsiveDesign.private.updateDetails(n)});n.on("columnHide",function(){gj.grid.plugins.responsiveDesign.private.updateDetails(n)});n.on("columnShow",function(){gj.grid.plugins.responsiveDesign.private.updateDetails(n)})}}};$.extend(!0,gj.grid.configuration,gj.grid.plugins.responsiveDesign.configuration);typeof gj.grid.plugins=="undefined"&&(gj.grid.plugins={});gj.grid.plugins.toolbar={configuration:{base:{toolbarTemplate:undefined,title:undefined,style:{toolbar:"ui-widget-header ui-state-default gj-grid-ui-toolbar"}},bootstrap:{style:{toolbar:"gj-grid-bootstrap-toolbar"}}},private:{},public:{title:function(n){var t=this.parent().find('div[data-role="toolbar"] [data-role="title"]');return typeof n!="undefined"?(t.text(n),this):t.text()}},init:function(n){var t,i;$.extend(!0,n,gj.grid.plugins.toolbar.public);t=n.data("grid");(typeof t.toolbarTemplate!="undefined"||typeof t.title!="undefined")&&(i=$('<div data-role="toolbar"><\/div>').addClass(t.style.toolbar),t.toolbarTemplate?i.append(t.toolbarTemplate):i.append($('<div data-role="title"/>').text(t.title)),t.minWidth&&i.css("min-width",t.minWidth),n.before(i))}};$.extend(!0,gj.grid.configuration,gj.grid.plugins.toolbar.configuration);gj.grid.private={init:function(n){var r,i,t=this.data("grid");if(!t){gj.grid.private.SetOptions(this,n||{});gj.grid.private.InitGrid(this);for(r in gj.grid.plugins)gj.grid.plugins.hasOwnProperty(r)&&gj.grid.plugins[r].init(this);t=this.data("grid");for(i in t)if(gj.grid.events.hasOwnProperty(i)){this.on(i,t[i]);delete t[i]}gj.grid.private.HeaderRenderer(this);gj.grid.private.AppendEmptyRow(this,"&nbsp;");gj.grid.events.initialized(this);t.autoLoad&&this.reload()}return this},SetOptions:function(n,t){var i=$.extend(!0,{},gj.grid.configuration.base),r=gj.grid.private.getHTMLConfiguration(n);(t.uiLibrary&&t.uiLibrary==="bootstrap"||r.uiLibrary&&r.uiLibrary==="bootstrap")&&$.extend(!0,i,gj.grid.configuration.bootstrap);$.extend(!0,i,r);$.extend(!0,i,t);gj.grid.private.setDefaultColumnConfig(i.columns,i.defaultColumnSettings);n.data("grid",i)},setDefaultColumnConfig:function(n,t){var r;if(n&&n.length)for(i=0;i<n.length;i++)r=$.extend(!0,{},t),$.extend(!0,r,n[i]),n[i]=r},getHTMLConfiguration:function(n){var t=gj.grid.private.getAttributes(n);return t&&t.source&&(t.dataSource=t.source,delete t.source),t.columns=[],n.find("thead > tr > th").each(function(){var i=$(this),r=i.text(),n=gj.grid.private.getAttributes(i);n.title=r;n.field||(n.field=r);n.events&&(n.events=gj.grid.private.eventsParser(n.events));t.columns.push(n)}),t},getAttributes:function(n){var t=n.data(),i=n.attr("width");return i&&(t.width=i),t},eventsParser:function(n){for(var u={},f,e,r,i=n.split(","),t=0;t<i.length;t++)r=i[t].indexOf(":"),r>0&&(f=$.trim(i[t].substr(0,r)),e=$.trim(i[t].substr(r+1,i[t].length)),u[f]=eval("window."+e));return u},LoaderSuccessHandler:function(n){return function(t){n.render(t)}},InitGrid:function(n){var t=n.data("grid");n.parent().data("role")!=="wrapper"&&n.wrapAll('<div data-role="wrapper" class="'+t.style.wrapper+'" />');t.width&&n.parent().css("width",t.width);t.minWidth&&n.css("min-width",t.minWidth);t.fontSize&&n.css("font-size",t.fontSize);n.addClass(t.style.table);"checkbox"===t.selectionMethod&&(t.columns=[{title:"",field:t.dataKey,width:t.uiLibrary==="jqueryui"?24:30,align:"center",type:"checkbox"}].concat(t.columns));n.append($("<tbody/>"))},HeaderRenderer:function(n){var u,i,e,s,h,f,o,r,t;for(u=n.data("grid"),i=u.columns,e=u.style.header,s=u.params[u.defaultParams.sortBy],h=u.params[u.defaultParams.direction],f=n.children("thead"),f.length===0&&(f=$("<thead />"),n.prepend(f)),o=$("<tr/>"),t=0;t<i.length;t+=1)r=$("<th/>"),i[t].width&&r.attr("width",i[t].width),r.addClass(e.cell),i[t].headerCssClass&&r.addClass(i[t].headerCssClass),r.css("text-align",i[t].align||"left"),i[t].sortable&&(r.addClass(e.sortable),r.bind("click",gj.grid.private.CreateSortHandler(n,r))),"checkbox"===u.selectionMethod&&"multiple"===u.selectionType&&"checkbox"===i[t].type?r.append($('<input type="checkbox" id="checkAllBoxes" />').hide().click(function(){this.checked?n.selectAll():n.unSelectAll()})):r.append($('<div style="float: left"/>').text(typeof i[t].title=="undefined"?i[t].field:i[t].title)),i[t].hidden&&r.hide(),r.data("cell",i[t]),o.append(r);f.empty().append(o)},CreateSortHandler:function(n,t){return function(){var r,f,i,u,e={};n.count()>1&&(f=n.data("grid"),i=t.data("cell"),i.direction=i.direction==="asc"?"desc":"asc",e[f.defaultParams.sortBy]=i.field,e[f.defaultParams.direction]=i.direction,u=f.style.header,r=t.children('span[data-role="sorticon"]'),r.length===0?(r=$('<span data-role="sorticon" style="float: left; margin-left:5px;"/>'),t.append(r)):r.removeClass("asc"===i.direction?u.sortDescIcon:u.sortAscIcon),r.addClass("asc"===i.direction?u.sortAscIcon:u.sortDescIcon),n.reload(e))}},StartLoading:function(n){var i,o,t,r,u,f,e;(gj.grid.private.StopLoading(n),e=n.data("grid"),0!==n.outerHeight())&&(i=n.children("tbody"),r=i.outerWidth(!1),u=i.outerHeight(!1),f=i.prev().outerHeight(!1)+n.prevAll().outerHeight(!1)+parseInt(n.parent().css("padding-top").replace("px",""),10),o=$("<div data-role='loading-cover' />").addClass(e.style.loadingCover).css({width:r,height:u,top:f}),t=$("<div data-role='loading-text'>Loading...<\/div>").addClass(e.style.loadingText),t.insertAfter(n),o.insertAfter(n),t.css({top:f+u/2-t.outerHeight(!1)/2,left:r/2-t.outerWidth(!1)/2}))},StopLoading:function(n){n.parent().find("div[data-role='loading-cover']").remove();n.parent().find("div[data-role='loading-text']").remove()},CreateAddRowHoverHandler:function(n,t){return function(){n.addClass(t)}},CreateRemoveRowHoverHandler:function(n,t){return function(){n.removeClass(t)}},AppendEmptyRow:function(n,t){var f,i,r,u;f=n.data("grid");i=$('<tr data-role="empty"/>');r=$("<td/>").css({width:"100%","text-align":"center"});r.attr("colspan",gj.grid.private.countVisibleColumns(n));u=$("<div />").html(t);r.append(u);i.append(r);gj.grid.events.beforeEmptyRowInsert(n,i);n.append(i)},autoGenerateColumns:function(n,t){var r,u,f,e=n.data("grid");if(e.columns=[],t.length>0){for(r=Object.getOwnPropertyNames(t[0]),i=0;i<r.length;i++)u=t[0][r[i]],f="text",u&&(u.indexOf("/Date(")>-1?f="date":typeof u=="number"&&(f="number")),e.columns.push({field:r[i],type:f});gj.grid.private.setDefaultColumnConfig(e.columns,e.defaultColumnSettings)}gj.grid.private.HeaderRenderer(n)},loadData:function(n,t,i){var u,t,r,f,s,e,h,c,o;for(gj.grid.events.dataBinding(n,t),u=n.data("grid"),f=t.length,gj.grid.private.StopLoading(n),u.autoGenerateColumns&&gj.grid.private.autoGenerateColumns(n,t),e=n.find("tbody"),"checkbox"===u.selectionMethod&&"multiple"===u.selectionType&&(o=n.find("input#checkAllBoxes"),o.prop("checked",!1),0===f?o.hide():o.show()),e.find('tr[data-role="empty"]').remove(),0===f&&(e.empty(),gj.grid.private.AppendEmptyRow(n,u.notFoundText)),h=e.children("tr"),s=h.length,r=0;r<s;r++)if(r<f)c=h.eq(r),gj.grid.private.RowRenderer(n,c,t[r],r);else{e.find("tr:gt("+(r-1)+")").remove();break}for(r=s;r<f;r++)gj.grid.private.RowRenderer(n,null,t[r],r);gj.grid.events.dataBound(n,t,i)},RowRenderer:function(n,t,i,r){var f,o,e,u,s;u=n.data("grid");t&&t.length!==0?(s="update",t.removeClass(u.style.content.rowSelected).off("click")):(s="create",t=$(n.find("tbody")[0].insertRow(r)),t.bind({"mouseenter.grid":gj.grid.private.CreateAddRowHoverHandler(t,u.style.content.rowHover),"mouseleave.grid":gj.grid.private.CreateRemoveRowHoverHandler(t,u.style.content.rowHover)}));f=u.dataKey&&i[u.dataKey]?i[u.dataKey]:r+1;t.data("row",{id:f,record:i});t.on("click",gj.grid.private.CreateRowClickHandler(n,f,i));for(e=0;e<u.columns.length;e++)s==="update"?(o=t.find("td:eq("+e+")"),gj.grid.private.CellRenderer(n,o,u.columns[e],i,f)):(o=gj.grid.private.CellRenderer(n,null,u.columns[e],i,f),t.append(o));gj.grid.events.rowDataBound(n,t,f,i)},CellRenderer:function(n,t,i,r,u,f){var o,e,f,h,s;if(h=n.data("grid"),t&&t.length!==0?(e=t.find("div"),f="update"):(t=$("<td/>").css("text-align",i.align||"left"),e=$("<div data-role='display' />"),i.cssClass&&t.addClass(i.cssClass),t.append(e),f="create"),"checkbox"===i.type?"create"===f?e.append($("<input />").attr("type","checkbox").val(u)):e.find("input[type='checkbox']").val(u).prop("checked",!1):"icon"===i.type?"create"===f&&e.append($("<span/>").addClass(h.uiLibrary==="bootstrap"?"glyphicon":"ui-icon").addClass(i.icon).css({cursor:"pointer"})):i.tmpl?(o=i.tmpl,i.tmpl.replace(/\{(.+?)\}/g,function(n,t){o=o.replace(n,gj.grid.private.formatText(r[t],i))}),e.text(o)):gj.grid.private.setCellText(e,i,r[i.field]),i.tooltip&&"create"===f&&e.attr("title",i.tooltip),"update"===f&&(t.off(),e.off()),i.events)for(s in i.events)if(i.events.hasOwnProperty(s))t.on(s,{id:u,field:i.field,record:r},i.events[s]);return i.hidden&&t.hide(),gj.grid.events.cellDataBound(n,e,u,i,r),t},setCellText:function(n,t,i){var r=gj.grid.private.formatText(i,t);t.tooltip||n.attr("title",r);n.text(r)},formatText:function(n,t){var i,f,u,r;if(n&&t.type)switch(t.type){case"date":n.indexOf("/Date(")>-1?i=new Date(parseInt(n.substr(6),10)):(r=n.match(/(\d+)/g),i=new Date(r[0],r[1]-1,r[2],r[3],r[4],r[5]));i.format&&t.format?n=i.format(t.format):(f=i.getDate().toString().length===2?i.getDate():"0"+i.getDate(),u=(i.getMonth()+1).toString(),u=u.length===2?u:"0"+u,n=u+"/"+f+"/"+i.getFullYear());break;case"money":n=parseFloat(n).toFixed(2)}else n=typeof n=="undefined"||n===null?"":n.toString();return t.decimalDigits&&n&&(n=parseFloat(n).toFixed(t.decimalDigits)),n},GetRecords:function(n,t){var i=[];return $.isArray(t)?i=t:n&&n.mapping&&$.isArray(t[n.mapping.dataField])&&(i=t[n.mapping.dataField]),i},CreateRowClickHandler:function(n,t){return function(){gj.grid.private.setSelected(n,$(this),t)}},SelectRow:function(n,t,i){i.addClass(t.style.content.rowSelected);gj.grid.events.rowSelect(n,i,i.data("row").id,i.data("row").record);"checkbox"===t.selectionMethod&&i.find("td:nth-child(1) input[type='checkbox']").prop("checked",!0);i.siblings().find("td[data-mode='edit']").each(function(){var n=$(this),i=t.columns[n.parent().children().index(this)];gj.grid.private.OnCellDisplay(n,i)})},UnselectRow:function(n,t,i){i.hasClass(t.style.content.rowSelected)&&(i.removeClass(t.style.content.rowSelected),gj.grid.events.rowUnselect(n,i,i.data("row").id,i.data("row").record),"checkbox"===t.selectionMethod&&i.find("td:nth-child(1) input[type='checkbox']").prop("checked",!1))},setSelected:function(n,t){var i=n.data("grid");t.hasClass(i.style.content.rowSelected)?gj.grid.private.UnselectRow(n,i,t):("single"===i.selectionType&&t.siblings().each(function(){gj.grid.private.UnselectRow(n,i,$(this))}),gj.grid.private.SelectRow(n,i,t))},_GetSelected:function(n){var i,r,t;return r=n.data("grid"),t=n.find("tbody > tr."+r.style.content.rowSelected),t.length>0&&(i=$(t[0]).data("row").id),i},GetSelectedRows:function(n){var t=n.data("grid");return n.find("tbody > tr."+t.style.content.rowSelected)},_GetSelections:function(n){var t=[],i=gj.grid.private.GetSelectedRows(n);return 0<i.length&&i.each(function(){t.push($(this).data("row").id)}),t},getRecordById:function(n,t){for(var f={},u,r=n.find("tbody > tr"),i=0;i<r.length;i++)if(u=$(r[i]).data("row"),u.id===t){f=u.record;break}return f},getRowById:function(n,t){for(var u=null,f,r=n.find("tbody > tr"),i=0;i<r.length;i++)if(f=$(r[i]).data("row"),f.id===t){u=$(r[i]);break}return u},getByPosition:function(n,t){var u={},r,i;return r=n.find("tbody > tr"),r.length>=t&&(i=r.eq(t-1).data("row"),i&&i.record&&(u=i.record)),u},GetColumnPosition:function(n,t){for(var r=-1,i=0;i<n.length;i++)if(n[i].field===t){r=i;break}return r},GetColumnInfo:function(n,t){for(var u={},r=n.data("grid"),i=0;i<r.columns.length;i+=1)if(r.columns[i].field===t){u=r.columns[i];break}return u},GetCell:function(n,t,i){var f={},u,r,e,o;for(o=gj.grid.private.GetColumnPosition(n,i),u=n.find("tbody > tr"),r=0;r<u.length;r+=1)if(e=$(u[r]).data("row"),e.id===t){f=$(u[r].cells[o]).find("div");break}return f},SetCellContent:function(n,t,i,r){var f,u=gj.grid.private.GetCell(n,t,i);u.empty();typeof r=="object"?u.append(r):(f=gj.grid.private.GetColumnInfo(n,i),gj.grid.private.setCellText(u,f,r))},clone:function(n){var t=[];return $.each(n,function(){t.push(this.clone())}),t},GetAll:function(n){for(var r=[],u=n.find("tbody > tr"),i,t=0;t<u.length;t++)i=$(u[t]).data("row"),i&&r.push(i);return r},countVisibleColumns:function(n){var i,r,t;for(i=n.data("grid").columns,r=0,t=0;t<i.length;t++)i[t].hidden!==!0&&r++;return r}};gj.grid.public={xhr:null,reload:function(n){var t,i,r;return t=this.data("grid"),$.extend(t.params,n),gj.grid.private.StartLoading(this),$.isArray(t.dataSource)?(r=gj.grid.private.GetRecords(t,t.dataSource),gj.grid.private.loadData(this,r,r.length)):typeof t.dataSource=="string"?(i={url:t.dataSource,data:t.params,success:gj.grid.private.LoaderSuccessHandler(this)},this.xhr&&this.xhr.abort(),this.xhr=$.ajax(i)):typeof t.dataSource=="object"&&(t.dataSource.data||(t.dataSource.data={}),$.extend(t.dataSource.data,t.params),i=$.extend(!0,{},t.dataSource),i.dataType==="json"&&typeof i.data=="object"&&(i.data=JSON.stringify(i.data)),i.success||(i.success=gj.grid.private.LoaderSuccessHandler(this)),this.xhr&&this.xhr.abort(),this.xhr=$.ajax(i)),this},clear:function(){var n=this.data("grid");return"checkbox"===n.selectionMethod&&this.find("input#checkAllBoxes").hide(),this.children("tbody").empty(),gj.grid.private.StopLoading(this),gj.grid.private.AppendEmptyRow(this,"&nbsp;"),gj.grid.events.dataBound(this,[],0),this},count:function(){return $(this).find("tbody tr").filter(function(){return!$(this).data("role")}).length},render:function(n){var i,r,t;n&&(i=this.data("grid"),i&&(r=gj.grid.private.GetRecords(i,n),t=n[i.mapping.totalRecordsField],(!t||isNaN(t))&&(t=0),gj.grid.private.loadData(this,r,t)))},destroy:function(n){var t=this.data("grid");t&&(gj.grid.events.destroying(this),gj.grid.private.StopLoading(this),this.off(),this.parent().hasClass(t.style.wrapper)&&this.unwrap(),this.removeData(),n?this.removeClass().empty():this.remove())},setSelected:function(n){var t=gj.grid.private.getRowById(this,n);t&&gj.grid.private.setSelected(this,t,n)},getSelected:function(){return gj.grid.private._GetSelected(this)},getSelections:function(){return gj.grid.private._GetSelections(this)},selectAll:function(){var n=this,t=this.data("grid");n.find("thead input#checkAllBoxes").prop("checked",!0);n.find("tbody tr").each(function(){gj.grid.private.SelectRow(n,t,$(this))})},unSelectAll:function(){var n=$(this),t=this.data("grid");this.find("thead input#checkAllBoxes").prop("checked",!1);this.find("tbody tr").each(function(){gj.grid.private.UnselectRow(n,t,$(this))})},getById:function(n){return gj.grid.private.getRecordById(this,n)},get:function(n){return gj.grid.private.getByPosition(this,n)},getAll:function(){return gj.grid.private.GetAll(this)},showColumn:function(n){var r=this.data("grid"),t=gj.grid.private.GetColumnPosition(r.columns,n),i;return t>-1&&(this.find("thead>tr>th:eq("+t+")").show(),$.each(this.find("tbody>tr"),function(){$(this).find("td:eq("+t+")").show()}),r.columns[t].hidden=!1,i=this.find('tbody > tr[data-role="empty"] > td'),i&&i.length&&i.attr("colspan",gj.grid.private.countVisibleColumns(this)),gj.grid.events.columnShow(this,r.columns[t])),this},hideColumn:function(n){var r=this.data("grid"),t=gj.grid.private.GetColumnPosition(r.columns,n),i;return t>-1&&(this.find("thead>tr>th:eq("+t+")").hide(),$.each(this.find("tbody>tr"),function(){$(this).find("td:eq("+t+")").hide()}),r.columns[t].hidden=!0,i=this.find('tbody > tr[data-role="empty"] > td'),i&&i.length&&i.attr("colspan",gj.grid.private.countVisibleColumns(this)),gj.grid.events.columnHide(this,r.columns[t])),this},addRow:function(n){var i,t=this.find("tbody > tr");return t.length===1&&t.data("role")==="empty"&&t.remove(),i=this.count(),gj.grid.private.RowRenderer(this,null,n,i),this},updateRow:function(n,t){var i=gj.grid.private.getRowById(this,n);return gj.grid.private.RowRenderer(this,i,t,i.index()),this},setCellContent:function(n,t,i){gj.grid.private.SetCellContent(this,n,t,i)},removeRow:function(n){var t=gj.grid.private.getRowById(this,n);return t&&t.remove(),this}},function(n){n.fn.grid=function(t){if(typeof t!="object"&&t){if(gj.grid.public[t])return gj.grid.public[t].apply(this,Array.prototype.slice.call(arguments,1));throw"Method "+t+" does not exist.";}else{function i(){var t=this;n.extend(t,gj.grid.public)}var r=new i;return n.extend(this,r),gj.grid.private.init.apply(this,arguments)}}}(jQuery);